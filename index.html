<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CICAL Burn Tracker 🔥</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-900 text-gray-100 font-sans min-h-screen flex flex-col items-center justify-center p-6">

  <h1 class="text-3xl md:text-5xl font-bold text-center mb-4 text-amber-400">🔥 CICAL Burn Tracker</h1>
  <p class="text-center text-gray-400 mb-8">Tracking total supply and burned tokens in real time for $CICAL.</p>

  <div class="bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-2xl">
    <div id="loading" class="text-center text-lg text-gray-400">Fetching data from the blockchain...</div>
    <div id="content" class="hidden">
      <p class="text-lg mb-2">💎 <strong>Initial Total Supply:</strong> 1,000,000,000 CICAL</p>
      <p class="text-lg mb-2">🔥 <strong>Burned Tokens:</strong> <span id="burned" class="text-red-400">0</span> CICAL</p>
      <p class="text-lg mb-2">🔹 <strong>Remaining Supply:</strong> <span id="remaining" class="text-green-400">0</span> CICAL</p>
      <p class="text-lg mb-2">🪙 <strong>Contract:</strong> <a href="https://bscscan.com/token/0xFAF994EBf5598BDC70f157957957333Ffc687b09" class="text-blue-400 hover:underline" target="_blank">0xFAF994EBf5598BDC70f157957957333Ffc687b09</a></p>
      <p class="text-lg mb-6">📊 Data updates every 30 seconds</p>

      <canvas id="burnChart" height="100"></canvas>
    </div>
  </div>

  <footer class="text-gray-500 mt-10 text-center text-sm">
    © 2025 CICAL Project — Transparency. Community. Growth. 💫
  </footer>

  <script>
    const API_KEY = "EPYTEB7XIHPZK9R6FJ1I7T5G84GB94DBAA"; // etherscan / bscscan API key
    const CONTRACT = "0xFAF994EBf5598BDC70f157957957333Ffc687b09";
    const DECIMALS = 18;
    const INITIAL_SUPPLY = 1_000_000_000; // 1 billion total supply

    async function getSupply() {
      const url = `https://api.bscscan.com/api?module=stats&action=tokensupply&contractaddress=${CONTRACT}&apikey=${API_KEY}`;
      const res = await fetch(url);
      const data = await res.json();
      if (data.status !== "1") throw new Error("Failed to load data");
      const raw = parseFloat(data.result) / (10 ** DECIMALS);
      return raw;
    }

    async function updateData() {
      try {
        const totalSupply = await getSupply();
        const burned = INITIAL_SUPPLY - totalSupply;
        const remaining = totalSupply;

        document.getElementById("loading").classList.add("hidden");
        document.getElementById("content").classList.remove("hidden");

        document.getElementById("burned").textContent = burned.toLocaleString("en-US");
        document.getElementById("remaining").textContent = remaining.toLocaleString("en-US");

        updateChart(burned, remaining);
      } catch (e) {
        document.getElementById("loading").textContent = "⚠️ Failed to fetch data.";
        console.error(e);
      }
    }

    let burnChart;
    function updateChart(burned, remaining) {
      const ctx = document.getElementById("burnChart").getContext("2d");
      if (burnChart) burnChart.destroy();
      burnChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['🔥 Burned', '💎 Remaining'],
          datasets: [{
            data: [burned, remaining],
            backgroundColor: ['#ef4444', '#10b981']
          }]
        },
        options: {
          plugins: { legend: { labels: { color: '#fff' } } },
          responsive: true,
          maintainAspectRatio: false
        }
      });
    }

    updateData();
    setInterval(updateData, 30000); // refresh setiap 30 detik
  </script>

</body>
</html>
